<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="Style.css">
  </head>
    <body>
    <!-- –í–∞—à HTML –æ—Å—Ç–∞—ë—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
    
    <body>
    <header>
      <div class="top_bg">
        <div class="header_top">
          <img src="Img/header/F1.png" height="85" width="300">
          <div>
            <a class="top_footer_text" href="login.html">–í—Ö–æ–¥</a>
            <img src="Img/header/F2.png" height="80" width="80">
          </div>
        </div>
    </div>
    <div class="bot_bg">
        <div class="header_bot">
          <a class="bot_footer_text">–ì–ª–∞–≤–Ω–∞—è</a>
          <a class="bot_footer_text" href="Mematicka_page1.html">–ú–µ–º–∞—Ç–µ–∫–∞</a>
          <a class="bot_footer_text" href="Random.html" >–†–∞–Ω–¥–æ–º</a>
          <a class="bot_footer_text">–ö–æ–ª–ª–µ–∫—Ü–∏—è</a>
          <a class="bot_footer_text" href="Eg.html">–ï–ì–≠</a>
          <a class="bot_footer_text" href="About.html">–û –Ω–∞—Å</a>
        </div>
    </div>
    </header>

    <main>
      <section>
         <div class="contener">
        <div class="redactor">
            <div class="red_zone" id="red-zone">
                <div class="image" id="meme-image"></div>
                <textarea id="meme-text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –º–µ–º–∞"></textarea>
            </div>
        </div>
        <div class="buttons_conts">
            <button id="create-btn" class="green_buttons">–°–æ–∑–¥–∞—Ç—å –º–µ–º</button>
            <button id="upload-btn" class="gray_buttons">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
            <input type="file" id="image-upload" accept="image/*" style="display: none;">
        </div>
    </div>
        </section>
      </section>
      <section>
        <div class="contener">
          <p class="zag">–®–∞–±–ª–æ–Ω—ã</p>
          <div class="blanks">
            <img src="Img/Blanks/B1.png" >
            <img src="Img/Blanks/B2.png" >
            <img src="Img/Blanks/B3.png" >
            <img src="Img/Blanks/B4.png" >
            <img src="Img/Blanks/B5.png" >
            <img src="Img/Blanks/B6.png" >
            <img src="Img/Blanks/B7.png" >
            <img src="Img/Blanks/B8.png" >
          </div>
        </div>
      </section>
      <canvas id="meme-canvas" style="display:none;"></canvas>
    </main>
    <footer>
      <div class="footers">
      <img src="Img/Foter/log.png" height="85" width="300">
      <div>
        <p class="zag">¬© MemGen.ru 2025</p>
        <a class="zag f" href="About.html">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å </a>
      </div>
    </div>
    </footer>
 <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <script>
         // –ß–∞—Å—Ç—å 1: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      document.addEventListener('DOMContentLoaded', function() {
    const uploadBtn = document.getElementById('upload-btn');
    const imageUpload = document.getElementById('image-upload');
    const imageContainer = document.getElementById('meme-image');
    
    uploadBtn.addEventListener('click', function() {
        imageUpload.click();
    });
    
    imageUpload.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                imageContainer.style.backgroundImage = `url(${event.target.result})`;
            };
            reader.readAsDataURL(file);
        }
    });
    
    // üî• –í–°–¢–ê–í–¨–¢–ï –≠–¢–û–¢ –ë–õ–û–ö –ö–û–î–ê (–ó–ê–ú–ï–ù–ò–í –°–¢–ê–†–£–Æ –í–ï–†–°–ò–Æ) üî•
    const createBtn = document.getElementById('create-btn');
    const redZone = document.getElementById('red-zone');
    
    createBtn.addEventListener('click', function() {
        html2canvas(redZone, {
            scale: 2,
            logging: false,
            useCORS: true,
            allowTaint: true,
            onclone: function(clonedDoc) {
                const clonedTextarea = clonedDoc.getElementById('meme-text');
                if (clonedTextarea) {
                    clonedTextarea.style.margin = '0';
                    clonedTextarea.style.display = 'block';
                    clonedTextarea.style.position = 'absolute';
                    clonedTextarea.style.bottom = '10%';
                    clonedTextarea.style.left = '50%';
                    clonedTextarea.style.transform = 'translateX(-50%)';
                }
            }
        }).then(canvas => {
            const ctx = canvas.getContext('2d');
            const text = document.getElementById('meme-text').value;

            if (text) {
                ctx.font = 'bold 48px Impact';
                ctx.textAlign = 'center';
                ctx.fillStyle = 'white';
                ctx.strokeStyle = 'black';
                ctx.lineWidth = 3;
                
                const textX = canvas.width / 2;
                const textY = canvas.height - 40;
                
                ctx.strokeText(text, textX, textY);
                ctx.fillText(text, textX, textY);
            }

            const link = document.createElement('a');
            link.download = 'my-meme.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        }).catch(err => {
            console.error('–û—à–∏–±–∫–∞:', err);
            alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–µ–º–∞');
        });
    });
});
    </script>
</body>
</html>